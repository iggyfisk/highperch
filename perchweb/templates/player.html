{% extends "layout.html" %}
{% import "replays.html" as replaymacros %}
{% import "races.html" as racemacros %}

{% macro racebar(games, totalGames, race) %}
<div class="chartrow">
    <div class="legend">{{ racemacros.icon(race) }}</div>
    <div class="barcontainer">
        <div class="bar {{ race }}" style="width:{{ (games*100)//totalGames }}%;"><span title="Games">{{ games }}</label></div>
    </div>
</div>
{% endmacro %}


{% block content %}
<div class="player">
    <h2>{{ player['name'] }} player profile</h2>
    <div class="content">
        <div class="stats">
            <div><b>{{ player['total_games'] }}</b> games played</div>
            <div><b>{{ player['AvgApm'] }}</b> average APM</div>
            <div><b>{{ player['TowerCount'] }}</b> towers built</div>
            <div><b>{{ player['ChatMessageCount'] }}</b> chirps</div>
        </div>
        <div class="racechart">
            {% if player['HUGames'] %}
            {{ racebar(player['HUGames'], player['total_games'], 'H') }}
            {% endif %}
            {% if player['ORGames'] %}
            {{ racebar(player['ORGames'], player['total_games'], 'O') }}
            {% endif %}
            {% if player['NEGames'] %}
            {{ racebar(player['NEGames'], player['total_games'], 'N') }}
            {% endif %}
            {% if player['UDGames'] %}
            {{ racebar(player['UDGames'], player['total_games'], 'U') }}
            {% endif %}
        </div>
    </div>
</div>

<div class="replays">
    <h2>Latest replays</h2>
    {% for replay in recent_replays %}
        {{ replaymacros.card(replay) }}
    {% endfor %}
</div>
{% endblock %}