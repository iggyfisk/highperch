{% macro card(replay) %}
<div class="replay card">
    <div class="minimap">Dare we undertake the sisyphean task of collecting a minimap image for every map?</div>
    <div class="details">
        <div class="header">
            <a class="title" href="{{ url_for('views.view_replay', replay_id=replay['ID']) }}">
                {{ replay['Name'] }} {{ replay['Map'] }}
            </a>
        </div>
        <p>{{ replay['Length'] }} | {{ replay['GameType'] }} | {{ replay['Map'] }} | {{ replay['TowerCount'] }} towers</p>
        {{ teams(replay.teams()) }}
    </div>
    <a class="download" href="/download/replay">
        <i class="icon-download-alt"></i>
    </a>
</div>
{% endmacro %}

{% macro teams(teams, detailed=False) %}
    <div class="teams">
        {% for (teamid, players) in teams.items() %}
            <div class="team">
            {% for player in players %}
                <img src="{{ player['race'] }}"/>
                <a href="{{ url_for('views.view_player', battletag=player['name']) }}">{{ player['name'] }}</a> 
                {% if detailed %}
                <div class="details">
                    0 APM |
                    Actions |
                    Build order |
                    Units |
                    Buildings |
                    Heroes |
                    Items 
                </div>
                {% endif %}
            {% endfor %}
            </div>
        <!--{% if not loop.last %} vs {% endif %}-->
        {% endfor %}
    </div>
{% endmacro %}